[gd_scene load_steps=20 format=2]

[ext_resource path="res://SongSelector.gd" type="Script" id=1]
[ext_resource path="res://scenes/DifficultyButtons.tscn" type="PackedScene" id=5]
[ext_resource path="res://scenes/Button.tscn" type="PackedScene" id=6]
[ext_resource path="res://scripts/ConnectPadInput.gd" type="Script" id=7]
[ext_resource path="res://scripts/TouchableViewport.gd" type="Script" id=8]
[ext_resource path="res://themes/vrworkout_theme.theme" type="Theme" id=9]
[ext_resource path="res://scripts/PlaylistView.gd" type="Script" id=10]
[ext_resource path="res://assets/arrow_right.png" type="Texture" id=11]
[ext_resource path="res://scenes/Tutorial.tscn" type="PackedScene" id=12]
[ext_resource path="res://TextElement.tscn" type="PackedScene" id=13]
[ext_resource path="res://scenes/SongSelectionGUI.tscn" type="PackedScene" id=14]

[sub_resource type="BoxShape" id=2]
margin = 0.001
extents = Vector3( 1, 0.0325357, 0.999178 )

[sub_resource type="PlaneMesh" id=3]

[sub_resource type="ViewportTexture" id=4]
flags = 12
viewport_path = NodePath("Viewport")

[sub_resource type="SpatialMaterial" id=5]
resource_local_to_scene = true
flags_transparent = true
flags_unshaded = true
albedo_texture = SubResource( 4 )

[sub_resource type="BoxShape" id=6]
extents = Vector3( 1.5, 0.033, 1 )

[sub_resource type="PlaneMesh" id=7]
size = Vector2( 3, 2 )

[sub_resource type="ViewportTexture" id=8]
flags = 12
viewport_path = NodePath("SongSelector/Viewport")

[sub_resource type="SpatialMaterial" id=9]
resource_local_to_scene = true
flags_transparent = true
flags_unshaded = true
albedo_texture = SubResource( 8 )

[node name="Spatial" type="Spatial"]
script = ExtResource( 1 )

[node name="Heartrate" type="Spatial" parent="."]
transform = Transform( -8.40732e-08, 0, 1.92337, 0, 1.92337, 0, -1, 0, -4.37114e-08, -1.64334, -0.15069, 0.0439329 )

[node name="Button_140" parent="Heartrate" instance=ExtResource( 6 )]
transform = Transform( -3.49691e-08, 0, -0.8, 0, 0.8, 0, 0.8, 0, -3.49691e-08, 7.45058e-09, -0.12458, -0.206166 )
ontext = "HR 140"

[node name="Button_160" parent="Heartrate" instance=ExtResource( 6 )]
transform = Transform( -3.49691e-08, 0, -0.799999, 0, 0.799999, 0, 0.799999, 0, -3.49691e-08, 7.45058e-09, 0.143077, -0.206166 )
ontext = "HR 160"

[node name="Button_150" parent="Heartrate" instance=ExtResource( 6 )]
transform = Transform( -3.49691e-08, 0, -0.799999, 0, 0.799999, 0, 0.799999, 0, -3.49691e-08, 7.45058e-09, 0.0102901, -0.206166 )
ontext = "HR 150"

[node name="Button_170" parent="Heartrate" instance=ExtResource( 6 )]
transform = Transform( -3.49691e-08, 0, -0.8, 0, 0.8, 0, 0.8, 0, -3.49691e-08, 7.45058e-09, 0.271645, -0.206166 )
ontext = "HR 170"

[node name="DifficultyButtons" parent="." instance=ExtResource( 5 )]
transform = Transform( 0.3, 0, 0, 0, -1.31134e-08, -0.3, 0, 0.3, -1.31134e-08, -1.41562, -0.206276, -0.000524152 )

[node name="Viewport" type="Viewport" parent="."]
size = Vector2( 512, 512 )
transparent_bg = true
msaa = 6
render_target_v_flip = true
render_target_update_mode = 3
script = ExtResource( 8 )

[node name="CanvasLayer" type="CanvasLayer" parent="Viewport"]

[node name="Mark" type="ColorRect" parent="Viewport/CanvasLayer"]
margin_right = 4.0
margin_bottom = 4.0

[node name="TabContainer" type="TabContainer" parent="Viewport/CanvasLayer"]
anchor_right = 1.0
anchor_bottom = 1.0
theme = ExtResource( 9 )

[node name="Playlist" type="Tabs" parent="Viewport/CanvasLayer/TabContainer"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 5.0
margin_top = 42.0
margin_right = -5.0
margin_bottom = -5.0

[node name="StartButton" type="Button" parent="Viewport/CanvasLayer/TabContainer/Playlist"]
margin_left = 355.0
margin_top = 5.0
margin_right = 475.0
margin_bottom = 78.0
theme = ExtResource( 9 )
action_mode = 0
text = "Start"

[node name="FreeplayButton" type="Button" parent="Viewport/CanvasLayer/TabContainer/Playlist"]
margin_left = 355.0
margin_top = 318.0
margin_right = 475.0
margin_bottom = 391.0
theme = ExtResource( 9 )
action_mode = 0
text = "Freeplay"

[node name="PauseButton" type="Button" parent="Viewport/CanvasLayer/TabContainer/Playlist"]
margin_left = 355.0
margin_top = 98.0
margin_right = 475.0
margin_bottom = 171.0
theme = ExtResource( 9 )
action_mode = 0
text = "Rest"

[node name="RemoveButton" type="Button" parent="Viewport/CanvasLayer/TabContainer/Playlist"]
margin_left = 355.0
margin_top = 208.0
margin_right = 475.0
margin_bottom = 281.0
theme = ExtResource( 9 )
action_mode = 0
text = "Delete"

[node name="Songs" type="Tree" parent="Viewport/CanvasLayer/TabContainer/Playlist"]
margin_left = 5.0
margin_right = 345.0
margin_bottom = 460.0
theme = ExtResource( 9 )
script = ExtResource( 10 )

[node name="Instruction" type="TextureRect" parent="Viewport/CanvasLayer/TabContainer/Playlist"]
anchor_left = 0.209
anchor_right = 0.36
margin_left = -4.582
margin_right = 211.616
margin_bottom = 463.0
texture = ExtResource( 11 )

[node name="Label" type="Label" parent="Viewport/CanvasLayer/TabContainer/Playlist/Instruction"]
margin_left = 35.0
margin_top = 160.0
margin_right = 313.0
margin_bottom = 355.0
rect_scale = Vector2( 0.7, 0.75 )
custom_colors/font_color = Color( 0, 0, 0, 1 )
text = "Look to your right and add
songs from the list

You can preview each song 
by pressing Preview"

[node name="Youtube" type="Tabs" parent="Viewport/CanvasLayer/TabContainer"]
visible = false
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 5.0
margin_top = 42.0
margin_right = -5.0
margin_bottom = -5.0

[node name="YoutubeButton" type="Button" parent="Viewport/CanvasLayer/TabContainer/Youtube"]
visible = false
margin_left = 16.0
margin_top = 20.0
margin_right = 279.0
margin_bottom = 65.0
theme = ExtResource( 9 )
action_mode = 0
text = " Start with Youtube Music "

[node name="ActivateYoutube" type="Button" parent="Viewport/CanvasLayer/TabContainer/Youtube"]
margin_left = 16.0
margin_top = 120.0
margin_right = 279.0
margin_bottom = 165.0
theme = ExtResource( 9 )
action_mode = 0
text = " Activate Youtube Player "

[node name="RichTextLabel" type="RichTextLabel" parent="Viewport/CanvasLayer/TabContainer/Youtube/ActivateYoutube"]
margin_top = 60.0
margin_right = 480.0
margin_bottom = 360.0
bbcode_enabled = true
bbcode_text = "This will open the browser
Click play and then go back into the game

Attention!
Youtube support is highly experimental.
The Quest will stop network access of the browser after 10 minutes. You will have to exit the game and start anew
"
text = "This will open the browser
Click play and then go back into the game

Attention!
Youtube support is highly experimental.
The Quest will stop network access of the browser after 10 minutes. You will have to exit the game and start anew
"

[node name="Tutorial" type="Tabs" parent="Viewport/CanvasLayer/TabContainer"]
visible = false
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 5.0
margin_top = 42.0
margin_right = -5.0
margin_bottom = -5.0

[node name="Tutorial" parent="Viewport/CanvasLayer/TabContainer/Tutorial" instance=ExtResource( 12 )]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 10.0
margin_top = 10.0
margin_right = 10.0
margin_bottom = 10.0
rect_scale = Vector2( 0.95, 0.95 )
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="StaticBody" type="StaticBody" parent="."]
transform = Transform( 1, 0, 0, 0, -1.62921e-07, -1, 0, 1, -1.62921e-07, 0, -0.441766, 0 )
script = ExtResource( 7 )

[node name="CollisionShape" type="CollisionShape" parent="StaticBody"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.0552993, 0 )
shape = SubResource( 2 )

[node name="MeshInstance" type="MeshInstance" parent="StaticBody"]
mesh = SubResource( 3 )
material/0 = SubResource( 5 )

[node name="tl_marker" type="Spatial" parent="StaticBody"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -1, 0, -1 )

[node name="tr_marker" type="Spatial" parent="StaticBody"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0, -1 )

[node name="bl_marker" type="Spatial" parent="StaticBody"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -1, 0, 1 )

[node name="SongSelector" type="StaticBody" parent="."]
transform = Transform( 0.5, -0.866025, 3.78552e-08, 0, -4.37114e-08, -1, 0.866025, 0.5, -2.18557e-08, 2.07903, -0.441766, 1.51668 )
script = ExtResource( 7 )

[node name="Viewport" type="Viewport" parent="SongSelector"]
size = Vector2( 768, 512 )
transparent_bg = true
msaa = 6
render_target_v_flip = true
script = ExtResource( 8 )

[node name="SongSelection" parent="SongSelector/Viewport" instance=ExtResource( 14 )]

[node name="CollisionShape" type="CollisionShape" parent="SongSelector"]
shape = SubResource( 6 )

[node name="MeshInstance" type="MeshInstance" parent="SongSelector"]
mesh = SubResource( 7 )
material/0 = SubResource( 9 )

[node name="tl_marker" type="Spatial" parent="SongSelector"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -1.5, 0, -1 )

[node name="tr_marker" type="Spatial" parent="SongSelector"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 1.5, 0, -1 )

[node name="bl_marker" type="Spatial" parent="SongSelector"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -1.5, 0, 1 )

[node name="MusicDirectory" parent="SongSelector" instance=ExtResource( 13 )]
transform = Transform( 0.299959, -0.00496364, 2.16968e-10, 0.00496364, 0.299959, 1.79523e-12, -2.16968e-10, 1.79634e-12, 0.3, -1.17644, -0.00640261, -1.14667 )
font_size = 16

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="."]

[connection signal="content_changed" from="." to="Viewport" method="_on_content_changed"]
[connection signal="selected" from="Heartrate/Button_140" to="." method="_on_Heartrate_selected" binds= [ 140 ]]
[connection signal="selected" from="Heartrate/Button_160" to="." method="_on_Heartrate_selected" binds= [ 160 ]]
[connection signal="selected" from="Heartrate/Button_150" to="." method="_on_Heartrate_selected" binds= [ 150 ]]
[connection signal="selected" from="Heartrate/Button_170" to="." method="_on_Heartrate_selected" binds= [ 170 ]]
[connection signal="difficulty_selected" from="DifficultyButtons" to="." method="_on_DifficultyButtons_difficulty_selected"]
[connection signal="tab_selected" from="Viewport/CanvasLayer/TabContainer" to="." method="_on_TabContainer_tab_selected"]
[connection signal="button_down" from="Viewport/CanvasLayer/TabContainer/Playlist/StartButton" to="." method="_on_Button_pressed"]
[connection signal="button_down" from="Viewport/CanvasLayer/TabContainer/Playlist/FreeplayButton" to="." method="_on_FreeplayButton_pressed"]
[connection signal="button_down" from="Viewport/CanvasLayer/TabContainer/Playlist/PauseButton" to="." method="_on_PauseButton_pressed"]
[connection signal="pressed" from="Viewport/CanvasLayer/TabContainer/Playlist/PauseButton" to="." method="_on_PauseButton_pressed"]
[connection signal="button_down" from="Viewport/CanvasLayer/TabContainer/Playlist/RemoveButton" to="." method="_on_RemoveButton_pressed"]
[connection signal="button_up" from="Viewport/CanvasLayer/TabContainer/Playlist/RemoveButton" to="." method="_on_RemoveButton_button_up"]
[connection signal="pressed" from="Viewport/CanvasLayer/TabContainer/Youtube/YoutubeButton" to="." method="_on_YoutubeButton_pressed"]
[connection signal="pressed" from="Viewport/CanvasLayer/TabContainer/Youtube/ActivateYoutube" to="." method="_on_ActivateYoutube_pressed"]
[connection signal="content_changed" from="Viewport/CanvasLayer/TabContainer/Tutorial/Tutorial" to="Viewport" method="_on_content_changed"]
[connection signal="interface_release" from="StaticBody" to="Viewport" method="_on_ConnectPadInput_interface_release"]
[connection signal="interface_touch" from="StaticBody" to="Viewport" method="_on_ConnectPadInput_interface_touch"]
[connection signal="interface_release" from="SongSelector" to="SongSelector/Viewport" method="_on_ConnectPadInput_interface_release"]
[connection signal="interface_touch" from="SongSelector" to="SongSelector/Viewport" method="_on_ConnectPadInput_interface_touch"]
[connection signal="add_playlist_song" from="SongSelector/Viewport/SongSelection" to="." method="_on_SongSelection_add_playlist_song"]
[connection signal="preview_song" from="SongSelector/Viewport/SongSelection" to="." method="_on_SongSelection_preview_song"]
